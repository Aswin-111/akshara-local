(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[883],{5579:function(e,t,a){Promise.resolve().then(a.bind(a,353))},353:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return i}});var l=a(7437),o=a(2265),s=a(3145),n={src:"/_next/static/media/logo.40042dde.png",height:55,width:56,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAw0lEQVR42mMAgdhJgYxQWh6ITRmAwGlacPLCOu+1DDAQNymQGSgZFdfrx1jZ48ccPTnoYGFfQAuyblkgdoCyG4Ea/kVODtoM4jBBBINEovsDuIB8PSDeBsS3gYrOMsBAZI8/Y9yUoBCgxFYgvhY3OegbkJ4MNhqoMi5uUtCCmIkBG4D8EqBkaOzEwIDEGaFyIAV+QJ3uAfWuygxCDBkMDAxhQBwPxFkMogzuDEhAUtJKREPeQUpPxlbcTMpa1FHCUlgfANPOR+KN26zLAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},c=a(3464),r=a(9064);function i(){let e=(0,o.useRef)(null),[t,a]=(0,o.useState)(null),[i,d]=(0,o.useState)(""),[g,u]=(0,o.useState)(0),[h,m]=(0,o.useState)([]),[f,p]=(0,o.useState)([]),[x,w]=(0,o.useState)({}),[v,y]=(0,o.useState)({clicked:!1,char:0}),[A,b]=(0,o.useState)({toggle:!1,char:0}),[k,N]=(0,o.useState)(!1),[j,E]=(0,o.useState)(!1),[C,S]=(0,o.useState)([]);(0,o.useEffect)(()=>{let e;let t=()=>{e&&clearTimeout(e),e=setTimeout(()=>{window.location.reload()},3e5)},a=["mousedown","mousemove","keydown","scroll","touchstart","touchmove"];return a.forEach(e=>{document.addEventListener(e,t)}),t(),()=>{e&&clearTimeout(e),a.forEach(e=>{document.removeEventListener(e,t)})}},[]),(0,o.useEffect)(()=>{let t=document.createElement("script");return t.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyDsiwyoqgC6v57aMFkdl1M6iGPkrTZA_gA","&callback=initMap"),t.async=!0,t.defer=!0,document.head.appendChild(t),window.initMap=()=>{let t=new window.google.maps.Map(e.current,{center:{lat:20,lng:0},zoom:3,minZoom:3,maxZoom:7,mapTypeId:"roadmap",disableDefaultUI:!0,streetViewControl:!1,fullscreenControl:!1,mapTypeControl:!1,restriction:{latLngBounds:{north:85,south:-85,west:-180,east:180},strictBounds:!0}});a(t),t.addListener("center_changed",()=>{let e=t.getCenter(),a=e.lng();a<-170?a+=360:a>180&&(a-=360),a!==e.lng()&&t.panTo({lat:e.lat(),lng:a})}),t.addListener("zoom_changed",()=>{t.getZoom()<t.get("minZoom")&&t.setZoom(t.get("minZoom")),t.getZoom()>t.get("maxZoom")&&t.setZoom(t.get("maxZoom"))}),t.addListener("click",e=>{let t=e.latLng.lat(),a=e.latLng.lng();console.log(t,a),async function(){try{let e=await c.Z.get("https://nominatim.openstreetmap.org/reverse?format=json&lat=".concat(String(t),"&lon=").concat(String(a),"&zoom=18&addressdetails=1"));console.log(e),e.data.address.country&&d(e.data.address.country)}catch(e){N(!1),console.log(e)}}()})},()=>{document.head.removeChild(t),delete window.initMap}},[]);let D=()=>{C.forEach(e=>{e.setMap(null)}),S([])};(0,o.useEffect)(()=>{!async function(){if(i)try{let e=await c.Z.post("".concat("http://localhost:7000/api/v1/map","/list-language"),{country:i}),t=new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}).format(Number(e.data.languages.length>0?e.data.languages.length:0));m(e.data.languages),N(!0),u(t),p(e.data.languages)}catch(e){N(!1),(0,r.ZP)("Languages not found for country ".concat(i),{style:{width:"70vw"}}),console.log(e)}}()},[i]);let Z=async e=>{try{let a=await c.Z.post("".concat("http://localhost:7000/api/v1/map","/language-details"),{language:e}),l=["id","Sl No","createdAt","updatedAt"],o={},s=a.data.languageDetails;if(Object.entries(s).map(e=>{let[t,a]=e;!l.includes(t.toString())&&a&&(o[t]=a)}),b({toggle:!A.toggle,char:e}),w(a.data.languageDetails),E(!0),D(),a.data.polygons&&t){let e=[];a.data.polygons.forEach((a,l)=>{a.coordinates&&Array.isArray(a.coordinates)&&a.coordinates.forEach((a,l)=>{if(Array.isArray(a)&&a.length>0){let l=a.map(e=>{if(Array.isArray(e)&&2===e.length){let[t,a]=e.map(parseFloat);if(isFinite(a)&&isFinite(t))return{lat:a,lng:t}}return null}).filter(e=>null!==e);if(l.length>2){let a=new window.google.maps.Polygon({paths:l,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35});a.setMap(t),e.push(a)}}})}),S(e)}}catch(e){console.error("Error fetching language details:",e)}},F=e=>{let t=f.filter(t=>t.startsWith(e));!1===v.clicked&&0===v.char?t.length>0&&(y({clicked:!0,char:e}),m(t)):v.char===e?(y({clicked:!1,char:0}),m(f)):t.length>0&&(y({clicked:!0,char:e}),m(t))};return(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("div",{children:(0,l.jsx)(r.x7,{})}),k&&(0,l.jsxs)("div",{className:"w-[20vw] h-[100vh] bg-white flex flex-col items-center",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center absolute bottom-[16vh]",children:[(0,l.jsx)(s.default,{src:n,className:"w-11 h-11",alt:"logo"}),(0,l.jsx)("h3",{className:"text-black font-semibold text-xl mt-5",children:i}),(0,l.jsxs)("p",{className:"text-black mt-3",children:["Total Languages ",g]})]}),!1===j?(0,l.jsxs)("div",{className:"w-full px-4 overflow-y-scroll flex justify-center",children:[(0,l.jsx)("div",{className:"flex gap-y-5 flex-col absolute left-3 mt-5 max-h-[55vh] overflow-y-scroll",children:"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").map((e,t)=>(0,l.jsx)("div",{className:"px-2 py-2 border-2 flex justify-center items-center ".concat(!0===v.clicked&&v.char===e?"border-green-500 bg-[#5f9253] text-white":"border-slate-400 text-black"," rounded-xl cursor-pointer"),onClick:()=>F(e),children:e},t))}),(0,l.jsx)("div",{className:"w-[40%] max-h-[55vh]",children:h.map((e,t)=>(0,l.jsx)("div",{style:{overflowX:"hidden"},className:"px-7 py-3 mt-5 border-2 ".concat(!0===A.toggle&&A.char===e?"text-white bg-[#5f9253] border-green-500":"text-black border-slate-400"," flex justify-center rounded-[0.7rem] cursor-pointer"),onClick:()=>Z(e),children:e},t))})]}):(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"w-full py-5 text-black text-[1rem] rounded-xl",children:A.toggle&&(0,l.jsxs)("div",{className:"w-full flex flex-col items-center px-10",children:[(0,l.jsx)("div",{className:"overflow-y-scroll overflow-x-hidden w-[16vw] h-[30vh] rounded-xl px-10 bg-white",children:(0,l.jsx)("div",{className:"w-full",children:x&&Object.keys(x).length>0?Object.entries(x).map(e=>{let[t,a]=e;return(0,l.jsx)("h2",{className:"text-black mt-3 text-sm",children:a&&!["id","Sl_No","createdAt","updatedAt"].includes(String(t).trim())?"".concat(t.replace(/_/g," ")," : ").concat(null!=a?a.toString():""):""},t)}):(0,l.jsx)("p",{className:"text-black mt-3 text-xl",children:"No data available"})})}),(0,l.jsx)("button",{className:"w-[60%] bg-red-400 text-white py-3 rounded-xl mt-3",onClick:()=>{b({toggle:!A.toggle,char:0}),E(!1),y({clicked:!1,char:0}),m(f),D()},children:"Close"})]})})})]}),(0,l.jsx)("div",{className:"main",children:(0,l.jsx)("div",{ref:e,className:"".concat(k?"w-[80vw] h-[100vh] relative":"w-[100vw] h-[100vh] relative"),id:"map"})})]})}}},function(e){e.O(0,[464,99,971,117,744],function(){return e(e.s=5579)}),_N_E=e.O()}]);